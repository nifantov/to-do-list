(()=>{"use strict";class e{constructor(e,t,a,s){this.type=e,this.idButtonContainer=t,this.idContainer=a,this.idButton=s}open(){const e=document.getElementById(this.idButtonContainer),t=document.getElementById(this.idButton),s=document.createElement("input"),n=document.createElement("button"),l=document.createElement("button");t.classList.add("notactive"),n.textContent="yes",l.textContent="no",n.id="acceptButton",l.id="cancelButton",n.onclick=()=>{a.add(this.type,s.value),this.close()},l.onclick=()=>this.close(),e.appendChild(s),e.appendChild(n),e.appendChild(l)}close(){const e=document.querySelector("input"),t=document.getElementById("acceptButton"),a=document.getElementById("cancelButton");document.getElementById(this.idButton).classList.toggle("notactive"),e.remove(),t.remove(),a.remove()}}const t=new class{constructor(){this.catalog=[]}setCatalog(e){this.catalog=e}getCatalog(){return this.catalog}addLabel(e){this.catalog.push(e)}deleteLabel(e){this.catalog=this.catalog.filter((t=>t.name!==e))}getLabel(e){return this.catalog.find((t=>t.getName()===e))}loadLabelList(){this.catalog.forEach((e=>{e.create()}))}deleteTask(e,t){this.getLabel(e).deleteTask(t)}install(){catalog.addLabel(new l("All tasks")),catalog.addLabel(new l("Today")),catalog.addLabel(new l("This week")),catalog.addLabel(new l("Someday"))}};class a{static load(){a.install();const e=new l("First Label"),s=new l("Second Label");t.addLabel(e),t.addLabel(s),e.addTask(new d("first Task 1","First Label")),e.addTask(new d("second Task 1","First Label","2022-05-03")),s.addTask(new d("first Task 22222222","Second Label","2022-05-05")),t.loadLabelList(),t.getLabel("First Label").openLabel(),a.buttonsListeners(),class{static saveCatalog(e){localStorage.setItem("catalog",JSON.stringify(e))}}.saveCatalog(t),console.log("load")}static buttonsListeners(){const e=document.getElementById("addLabel"),a=document.getElementById("addTask");e.onclick=()=>s.open(),a.onclick=()=>n.open(),document.querySelectorAll(".label").forEach((e=>{e.onclick=()=>{const a=e.textContent;t.getLabel(a).openLabel()}}))}static add(e,s){if("label"===e)t.addLabel(new l(s)),t.getLabel(s).create(),t.getLabel(s).openLabel(),a.buttonsListeners();else if("task"===e){const e=document.getElementById("label-name").textContent;t.getLabel(e).addTask(new d(s,e)),t.getLabel(e).findTask(s).create()}}static clearTaskList(){document.getElementById("task-list").innerHTML=""}static loadTaskList(e){const a=t.getLabel(e);document.getElementById("label-name").textContent=e,a.tasks.forEach((e=>e.create()))}static deleteTask(e,a){t.deleteTask(e,a),console.log(t)}static install(){t.addLabel(new l("All tasks")),t.addLabel(new l("Today")),t.addLabel(new l("This week")),t.addLabel(new l("Someday"))}static updateDefaultLabels(){t.getLabel("All tasks"),t.getLabel("Today"),t.getLabel("This week"),t.getLabel("Someday")}}const s=new e("label","addLabelContainer","label-list","addLabel"),n=new e("task","addTaskContainer","task-list","addTask");class l{constructor(e){this.name=e,this.tasks=[]}create(){const e=document.getElementById("label-list"),t=document.createElement("button");t.classList.add("label"),t.textContent=this.name,e.appendChild(t)}setName(e){this.name=e}getName(){return this.name}addTask(e){this.tasks.push(e)}deleteTask(e){this.tasks=this.tasks.filter((t=>t.name!==e))}findTask(e){return this.tasks.find((t=>t.name===e))}openLabel(){a.clearTaskList(),a.loadTaskList(this.name)}}class d{constructor(e,t,a="no date"){this.name=e,this.label=t,this.date=a}setName(e){this.name=e}getName(){return this.name}setDate(e){this.date=e}getDate(){return this.date}create(){const e=document.getElementById("task-list"),t=document.createElement("div");t.classList.add("task");const s=document.createElement("div");s.classList.add("checkbox"),s.onclick=()=>s.classList.toggle("close");const n=document.createElement("p");n.classList.add("task-name"),n.textContent=this.name;const l=document.createElement("input");l.classList.add("input-rename");const d=document.createElement("div");d.classList.add("accept");const o=document.createElement("div");o.classList.add("edit-button"),o.onclick=()=>{n.classList.add("notactive"),o.classList.add("notactive"),s.after(l),l.after(d),d.onclick=()=>{this.setName(l.value),l.remove(),d.remove(),n.classList.remove("notactive"),o.classList.remove("notactive"),n.textContent=l.value}};const c=document.createElement("div");c.classList.add("remove-button"),c.onclick=()=>{t.remove(),a.deleteTask(this.label,this.name)};const i=document.createElement("input");i.type="date",i.addEventListener("change",(()=>{this.setDate(i.value),m.textContent=this.date,i.remove(),m.classList.remove("notactive")}));const m=document.createElement("div");m.classList.add("date"),m.textContent=this.date,m.onclick=()=>{m.classList.add("notactive"),t.appendChild(i)},e.appendChild(t),t.appendChild(s),t.appendChild(n),t.appendChild(o),t.appendChild(c),t.appendChild(m)}}document.addEventListener("DOMContentLoaded",a.load),console.log(Math.random())})();